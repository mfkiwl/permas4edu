$DEFVAR M TYPE = REAL LIST = 1.0  ! mass
$DEFVAR C TYPE = REAL LIST = 0.25 ! viscous damper
$DEFVAR K TYPE = REAL LIST = 1.0  ! linear spring
$DEFVAR ALPHA TYPE = REAL LIST = 15.0 ! slope
$DEFVAR GAMMA TYPE = REAL LIST = 200.0 ! regularzation
!
$ENTER COMPONENT NAME = DFLT_COMP
!
   $SITUATION NAME = STEP_1 
       DFLT_COMP SYSTEM = S_STEP_1  CONSTRAINTS = C_STEP_1  LOADING = L_STEP_1  RESULTS = R_STEP_1
   $END SITUATION
!
   $SITUATION NAME = STEP_2 
       DFLT_COMP SYSTEM = S_STEP_1  CONSTRAINTS = C_STEP_1  LOADING = L_STEP_2 
   $END SITUATION

!
   $STRUCTURE 

      $NODE NSET = ALL_NODES
         100  0.0  0.0  0.0 
         101  1.0  0.0  0.0

      $NSET NAME = GROUND
         100

      $NSET NAME = F
         101

      $ELEMENT TYPE = MASS3 ESET = M
           1  101

      $ELEMENT TYPE = DAMP1 ESET = C
           2  100  101

      $ELEMENT TYPE = SPRING1 ESET = K
           3  100  101

      $ELEMENT TYPE = NLSTIFF ESET = NL_K
           4  100  101
 
   $END STRUCTURE
!
   $SYSTEM NAME = S_STEP_1

      $GEODAT MASS CONT = MASS
        GD_M  M(1)

      $GEODAT SPRING CONT = STIFF
        GD_K K(1)

      $GEODAT DAMPER CONT = DAMP
        GD_C C(1)

      $GEODAT SPRING CONT = FUNCTION
        GD_NL_K 1

      $ELPROP
        M     GEODAT = GD_M
        K     GEODAT = GD_K
        C     GEODAT = GD_C
        NL_K  GEODAT = GD_NL_K

   $END SYSTEM
!
   $CONSTRAINTS NAME = C_STEP_1

      $SUPPRESS DOFS = 2,3
         ALL_NODES
 
      $SUPPRESS DOFS = 1
         GROUND
  
   $END CONSTRAINTS
!
   $LOADING NAME = L_STEP_1

      $CONLOAD LPAT = 1
         F 1: 1.0

      $FREQLOAD
         LPAT = 1 TYPE = COSINE

   $END LOADING
!
   $LOADING NAME = L_STEP_2

   $END LOADING
!
   $RESULTS NAME = R_STEP_1

      $FREQUENCY PRIMARY = EQUI XTYPE = OMEGA
         0.0 3.2 0.1

   $END RESULTS
     
$EXIT COMPONENT
!
$ENTER FUNCTION

   $FUNCTION FORMULA FID = 1
      F(X)=ALPHA(1)*X*0.5*(1+TANH(GAMMA(1)*X))

$EXIT FUNCTION
!
$FIN
